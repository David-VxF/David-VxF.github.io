<!DOCTYPE html>  
<html>  
<head>  
  <meta charset="UTF-8">  
  <title>Kirim Token via EmailJS</title>  
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>  
  <script>  
    // Inisialisasi EmailJS dengan Public Key milik Tuan  
    window.onload = () => {  
      emailjs.init("SLxbK8YV8CrMxrkPE"); // Ganti dengan public key milik Tuan  
    };  
  
    function generateToken(length = 6) {  
      return Array.from(crypto.getRandomValues(new Uint8Array(length)))  
        .map(b => (b % 10).toString()).join('');  
    }  
  
    function getExpireTime(minutes = 15) {  
      const now = new Date();  
      now.setMinutes(now.getMinutes() + minutes);  
      return now.toTimeString().slice(0, 5); // Format HH:MM  
    }  
  
    async function kirimEmail() {  
      const name = document.getElementById("nama").value.trim();  
      const email = document.getElementById("email").value.trim();  
  
      if (!name || !email) {  
        alert("Nama dan email wajib diisi.");  
        return;  
      }  
  
      const token = generateToken();  
      const expire = getExpireTime();  
  
      const params = {  
        user_name: name,  
        user_email: email,  
        verify_code: token,  
        expire_time: expire  
      };  
  
      emailjs.send("service_vxq85ed", "template_l21v83c", params)  
        .then((res) => {
  console.log("Response dari EmailJS:", res);
  alert(`Token verifikasi berhasil dikirim ke ${email}!\nSilahkan buka Gmail untuk mendapatkan kode verifikasi`);
})
.catch(err => {
  console.error("Gagal mengirim email:", err);
  alert("Gagal mengirim email:\n" + JSON.stringify(err));
}); 
    }  
  </script>  
</head>  
<body style="font-family: sans-serif; padding: 20px;">  
  <h2>Kirim Token Verifikasi via EmailJS</h2>  
  <label>Nama:</label><br>  
  <input id="nama" type="text" placeholder="Nama Anda"><br><br>  
  
  <label>Email:</label><br>  
  <input id="email" type="email" placeholder="email@example.com"><br><br>  
  
  <button onclick="kirimEmail()">Kirim Token</button>  
</body>  
</html>
